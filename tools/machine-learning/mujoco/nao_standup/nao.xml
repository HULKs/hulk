<mujoco model="naoV6">
  <compiler angle="degree" inertiafromgeom="true"/>
  <!-- <option integrator="implicitfast" timestep="0.003"> -->
  <option integrator="RK4" iterations="50" solver="PGS" timestep="0.003">
    <!-- <flag solverstat="enable" energy="enable"/> -->
    <!--<flag gravity="disable"/>-->
  </option>

  <asset>
    <texture type="skybox" builtin="gradient" rgb1=".3 .5 .7" rgb2="0 0 0" width="32" height="512"/>
    <texture name="grid" type="2d" builtin="checker" width="512" height="512" rgb1=".1 .2 .3" rgb2=".2 .3 .4"/>
    <material name="grid" texture="grid" texrepeat="1 1" texuniform="true" reflectance=".2"/>
  </asset>

  <visual>
    <global offwidth="1280" offheight="720"/>
    <map fogend="5" fogstart="3"/>
  </visual>

  <default>
    <joint armature="1" damping="1" limited="true"/>
    <geom conaffinity="1" condim="1" contype="1" margin="0.001" rgba="0.8 0.6 .4 1"/>
    <!-- <geom conaffinity="1" condim="1" contype="1" margin="0.001" material="geom" rgba="0.8 0.6 .4 1"/> -->
    <motor ctrllimited="true" ctrlrange="-1 1"/>
  </default>

  <worldbody>
    <geom name="floor" size="0 0 .05" type="plane" material="grid" condim="3"/>
    <light cutoff="100" diffuse="1 1 1" dir="-0 0 -1.3" directional="true" exponent="1" pos="0 0 1.3" specular=".1 .1 .1"/>

    <body name="torso" pos="0 0 0.33" euler="0 0 0">
      <freejoint name="root"/>
      <camera name="robot" mode="targetbody" target="torso" pos="0 1 0"/>
      <geom name="torso" type="sphere" size="0.0642"/>
      <site name="imu"/>
      <body name="head" pos="0 0 0.1265">
        <joint name="head_yaw" type="hinge" axis="0 0 1" range="-119.5 119.5"/>
        <joint name="head_pitch" type="hinge" axis="0 1 0" range="-38.5 29.5"/>
        <geom name="head" type="cylinder" size="0.053 0.0605" euler="90 0 0" pos="0 0 0.053"/>
      </body>

      <!--<geom name="left_shoulder" type="sphere" size="0.03" pos="0 0.098 0.1"/>-->
      <body name="left_shoulder" pos="0 0.098 0.1">
        <joint name="left_shoulder_pitch" type="hinge" axis="0 1 0" range="-119.5 119.5"/>
        <joint name="left_shoulder_roll" type="hinge" axis="1 0 0" range="-18 76"/>
        <geom name="left_upper_arm" type="capsule" size="0.036" fromto="0 0 0 0.105 0.015 0"/>
        <body name="left_elbow" pos="0.105 0.015 0">
          <joint name="left_elbow_yaw" type="hinge" axis="1 0 0" range="-119.5 119.5"/>
          <joint name="left_elbow_roll" type="hinge" axis="0 0 1" range="-88.5 -2"/>
          <geom name="left_lower_arm" type="capsule" size="0.036" fromto="0 0 0 0.05595 0 0"/>
          <body name="left_wrist" pos="0.05595 0 0">
            <joint name="left_wrist_yaw" type="hinge" axis="1 0 0" range="-104.5 104.5"/>
            <geom name="left_wrist" type="capsule" size="0.036" fromto="0 0 0 0.05775 0 0"/>
          </body>
        </body>
      </body>

      <!--<geom name="right_shoulder" type="sphere" size="0.03"/>-->
      <body name="right_shoulder" pos="0 -0.098 0.1">
        <joint name="right_shoulder_pitch" type="hinge" axis="0 1 0" range="-119.5 119.5"/>
        <joint name="right_shoulder_roll" type="hinge" axis="1 0 0" range="-76 18"/>
        <geom name="right_upper_arm" type="capsule" size="0.036" fromto="0 0 0 0.105 -0.015 0"/>
        <body name="right_elbow" pos="0.105 -0.015 0">
          <joint name="right_elbow_yaw" type="hinge" axis="1 0 0" range="-119.5 119.5"/>
          <joint name="right_elbow_roll" type="hinge" axis="0 0 1" range="2 88.5"/>
          <geom name="right_lower_arm" type="capsule" size="0.036" fromto="0 0 0 0.05595 0 0"/>
          <body name="right_wrist" pos="0.05595 0 0">
            <joint name="right_wrist_yaw" type="hinge" axis="1 0 0" range="-104.5 104.5"/>
            <geom name="right_wrist" type="capsule" size="0.036" fromto="0 0 0 0.05775 0 0"/>
          </body>
        </body>
      </body>

      <body name="left_upper_leg" pos="0 0.05 -0.085" euler="0 90 0">
        <joint name="left_hip_yaw_pitch" type="hinge" axis="-1 -1 0" range="-65.62 42.44"/>
        <joint name="left_hip_roll" type="hinge" axis="0 0 1" range="-21.74 45.29"/>
        <joint name="left_hip_pitch" type="hinge" axis="0 1 0" range="-88 27.73"/>
        <geom name="left_upper_leg" type="capsule" size="0.036" fromto="0 0 0 0.105 0 0"/>
        <body name="left_lower_leg" pos="0.1 0 0">
          <joint name="left_knee_pitch" type="hinge" axis="0 1 0" range="-5.29 121.04"/>
          <geom name="left_lower_leg" type="capsule" size="0.036" fromto="0 0 0 0.105 0 0"/>
          <body name="left_foot" pos="0.1029 0 0" euler="0 -90 0">
            <site name="left_foot_back_left_fsr" pos="0 0.025 -0.035" size="0.015 0.015 0.0015"  type="box" rgba="1 0 0 1" />
            <geom name="left_foot_back_left_fsr" pos="0 0.025 -0.035" size="0.015 0.015 0.001" type="box" rgba="1 0 0 1" />
            <site name="left_foot_back_right_fsr" pos="0 -0.015 -0.035" size="0.015 0.015 0.0015" type="box" rgba="1 0 0 1" />
            <geom name="left_foot_back_right_fsr" pos="0 -0.015 -0.035" size="0.015 0.015 0.001" type="box"  rgba="1 0 0 1" />
            <site name="left_foot_front_left_fsr" pos="0.12 0.025 -0.035" size="0.015 0.015 0.0015" type="box" rgba="1 0 0 1" />
            <geom name="left_foot_front_left_fsr" pos="0.12 0.025 -0.035" size="0.015 0.015 0.001" type="box"  rgba="1 0 0 1" />
            <site name="left_foot_front_right_fsr" pos="0.12 -0.015 -0.035" size="0.015 0.015 0.0015" type="box" rgba="1 0 0 1" />
            <geom name="left_foot_front_right_fsr" pos="0.12 -0.015 -0.035" size="0.015 0.015 0.001" type="box"  rgba="1 0 0 1" />
            <joint name="left_ankle_pitch" type="hinge" axis="0 1 0" range="-68.15 52.86"/>
            <joint name="left_ankle_roll" type="hinge" axis="1 0 0" range="-22.79 44.06"/>
            <geom name="left_foot" type="box" size="0.08 0.04 0.0175" pos="0.06 0.005 -0.0175"/>
          </body>
        </body>
      </body>

      <body name="right_upper_leg" pos="0 -0.05 -0.085" euler="0 90 0">
        <joint name="right_hip_yaw_pitch" type="hinge" axis="-1 1 0" range="-65.62 42.44" />
        <joint name="right_hip_roll" type="hinge" axis="0 0 1" range="-45.29 21.74 "/>
        <joint name="right_hip_pitch" type="hinge" axis="0 1 0" range="-88 27.73"/>
        <geom name="right_upper_leg" type="capsule" size="0.036" fromto="0 0 0 0.105 0 0"/>
        <body name="right_lower_leg" pos="0.1 0 0">
        <joint name="right_knee_pitch" type="hinge" axis="0 1 0" range="-5.9 121.04"/> <!-- The Fuck?! they are not the same as the left leg? -->
          <geom name="right_lower_leg" type="capsule" size="0.036" fromto="0 0 0 0.105 0 0"/>
          <body name="right_foot" pos="0.1029 0 0" euler="0 -90 0">
            <site name="right_foot_back_left_fsr" pos="0 0.015 -0.035" size="0.015 0.015 0.001" type="box" rgba="1 0 0 1" />
            <geom name="right_foot_back_left_fsr" pos="0 0.015 -0.035" size="0.015 0.015 0.0015" type="box" rgba="1 0 0 1" />
            <site name="right_foot_back_right_fsr" pos="0 -0.025 -0.035" size="0.015 0.015 0.001" type="box" rgba="1 0 0 1" />
            <geom name="right_foot_back_right_fsr" pos="0 -0.025 -0.035" size="0.015 0.015 0.0015" type="box" rgba="1 0 0 1" />
            <site name="right_foot_front_left_fsr" pos="0.12 0.015 -0.035" size="0.015 0.015 0.001" type="box" rgba="1 0 0 1" />
            <geom name="right_foot_front_left_fsr" pos="0.12 0.015 -0.035" size="0.015 0.015 0.0015" type="box" rgba="1 0 0 1" />
            <site name="right_foot_front_right_fsr" pos="0.12 -0.025 -0.035" size="0.015 0.015 0.001" type="box" rgba="1 0 0 1" />
            <geom name="right_foot_front_right_fsr" pos="0.12 -0.025 -0.035" size="0.015 0.015 0.0015" type="box" rgba="1 0 0 1" />
            <joint name="right_ankle_pitch" type="hinge" axis="0 1 0" range="-67.97 53.4"/>
            <joint name="right_ankle_roll" type="hinge" axis="1 0 0" range="-44.06 22.8"/>
            <geom name="right_foot" type="box" size="0.08 0.04 0.0175" pos="0.06 -0.005 -0.0175"/>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <equality>
    <joint joint1="left_hip_yaw_pitch" joint2="right_hip_yaw_pitch" polycoef="0 -1 0 0 0"/>
  </equality>

  <contact>
    <exclude body1="left_wrist" body2="left_shoulder"/>
    <exclude body1="right_wrist" body2="right_shoulder"/>
  </contact>

  <sensor>
    <accelerometer name="accelerometer" site="imu"/>
    <gyro name="gyroscope" site="imu"/>

    <touch name="left_foot_back_left_fsr" site="left_foot_back_left_fsr"/>
    <touch name="left_foot_back_right_fsr" site="left_foot_back_right_fsr"/>
    <touch name="left_foot_front_left_fsr" site="left_foot_front_left_fsr"/>
    <touch name="left_foot_front_right_fsr" site="left_foot_front_right_fsr"/>
    <touch name="right_foot_back_left_fsr" site="right_foot_back_left_fsr"/>
    <touch name="right_foot_back_right_fsr" site="right_foot_back_right_fsr"/>
    <touch name="right_foot_front_left_fsr" site="right_foot_front_left_fsr"/>
    <touch name="right_foot_front_right_fsr" site="right_foot_front_right_fsr"/>

    <jointpos name="head_yaw" joint="head_yaw"/>
    <jointpos name="head_pitch" joint="head_pitch"/>
    <jointpos name="left_shoulder_pitch" joint="left_shoulder_pitch"/>
    <jointpos name="left_shoulder_roll" joint="left_shoulder_roll"/>
    <jointpos name="left_elbow_yaw" joint="left_elbow_yaw"/>
    <jointpos name="left_elbow_roll" joint="left_elbow_roll"/>
    <jointpos name="left_wrist_yaw" joint="left_wrist_yaw"/>

    <jointpos name="right_shoulder_pitch" joint="right_shoulder_pitch"/>
    <jointpos name="right_shoulder_roll" joint="right_shoulder_roll"/>
    <jointpos name="right_elbow_yaw" joint="right_elbow_yaw"/>
    <jointpos name="right_elbow_roll" joint="right_elbow_roll"/>
    <jointpos name="right_wrist_yaw" joint="right_wrist_yaw"/>

    <jointpos name="left_hip_yaw_pitch" joint="left_hip_yaw_pitch"/>
    <jointpos name="left_hip_roll" joint="left_hip_roll"/>
    <jointpos name="left_hip_pitch" joint="left_hip_pitch"/>
    <jointpos name="left_knee_pitch" joint="left_knee_pitch"/>
    <jointpos name="left_ankle_pitch" joint="left_ankle_pitch"/>
    <jointpos name="left_ankle_roll" joint="left_ankle_roll"/>

    <jointpos name="right_hip_yaw_pitch" joint="right_hip_yaw_pitch"/>
    <jointpos name="right_hip_roll" joint="right_hip_roll"/>
    <jointpos name="right_hip_pitch" joint="right_hip_pitch"/>
    <jointpos name="right_knee_pitch" joint="right_knee_pitch"/>
    <jointpos name="right_ankle_pitch" joint="right_ankle_pitch"/>
    <jointpos name="right_ankle_roll" joint="right_ankle_roll"/>
  </sensor>

  <actuator>
    <position name="head_yaw" joint="head_yaw" dampratio="1" kp="90.0"/> 
    <position name="head_pitch" joint="head_pitch" dampratio="1" kp="90.0"/>

    <position name="left_shoulder_pitch" joint="left_shoulder_pitch" dampratio="1" kp="90.0"/>
    <position name="left_shoulder_roll" joint="left_shoulder_roll" dampratio="1" kp="90.0"/>
    <position name="left_elbow_yaw" joint="left_elbow_yaw" dampratio="1" kp="90.0"/>
    <position name="left_elbow_roll" joint="left_elbow_roll" dampratio="1" kp="90.0"/>
    <position name="left_wrist_yaw" joint="left_wrist_yaw" dampratio="1" kp="90.0"/>

    <position name="right_shoulder_pitch" joint="right_shoulder_pitch" dampratio="1" kp="90.0"/>
    <position name="right_shoulder_roll" joint="right_shoulder_roll" dampratio="1" kp="90.0"/>
    <position name="right_elbow_yaw" joint="right_elbow_yaw" dampratio="1" kp="90.0"/>
    <position name="right_elbow_roll" joint="right_elbow_roll" dampratio="1" kp="90.0"/>
    <position name="right_wrist_yaw" joint="right_wrist_yaw" dampratio="1" kp="90.0"/>

    <position name="left_hip_yaw_pitch" joint="left_hip_yaw_pitch" dampratio="1" kp="90.0"/>
    <position name="left_hip_roll" joint="left_hip_roll" dampratio="1" kp="90.0"/>
    <position name="left_hip_pitch" joint="left_hip_pitch" dampratio="1" kp="90.0"/>
    <position name="left_knee_pitch" joint="left_knee_pitch" dampratio="1" kp="90.0"/>
    <position name="left_ankle_pitch" joint="left_ankle_pitch" dampratio="1" kp="90.0"/>
    <position name="left_ankle_roll" joint="left_ankle_roll" dampratio="1" kp="90.0"/>

    <!-- <position name="right_hip_yaw_pitch" joint="right_hip_yaw_pitch" dampratio="1" kp="90.0"/> --> <!-- Is controlled indirectly through left_hip_yaw_pitch -->
    <position name="right_hip_roll" joint="right_hip_roll" dampratio="1" kp="90.0"/>
    <position name="right_hip_pitch" joint="right_hip_pitch" dampratio="1" kp="90.0"/>
    <position name="right_knee_pitch" joint="right_knee_pitch" dampratio="1" kp="90.0"/>
    <position name="right_ankle_pitch" joint="right_ankle_pitch" dampratio="1" kp="90.0"/>
    <position name="right_ankle_roll" joint="right_ankle_roll" dampratio="1" kp="90.0"/>
    
  </actuator>

  <keyframe>
    <!--
    The values below are split into rows for readability:
      torso position
      torso orientation
      head
      left arm
      right arm
      left leg
      right leg
    -->
    <key name="zero"
         qpos="0 0 2.0
               1 0 0 0
               0 0
               0 0 0 0 0
               0 0 0 0 0
               0 0 0 0 0 0
               0 0 0 0 0 0"/>
    <key name="ready"
         qpos="0 0 0.3
               1 0 0 0
               0 0
               1.57 0.1 0 0 0
               1.57 0.1 0 0 0
               0 0 -0.25 0.35 -0.1 0
               0 0 -0.25 0.35 -0.1 0"/>
    <key name="face-down"
         qpos="0 0 0.064
               0.64 0.03 0.77 -0.02
               0 -0.4
               1.33 0.15 0.19 -0.08 0.1
               1.31 0.15 0.19 -0.08 -0.05
               0 0 -0.07 0.29 -0.04 0.02
               0 0.04 -0.1 0.31 0.04 0"/>
  </keyframe>
</mujoco>
