use color_eyre::Result;
use path_serde::{PathDeserialize, PathIntrospect, PathSerialize};
use serde::{Deserialize, Serialize};

use crate::bounding_box::BoundingBox;

#[derive(Debug, Clone, Serialize, Deserialize, PathIntrospect, PathSerialize, PathDeserialize)]
pub struct Detection {
    pub label: YOLOv8ObjectDetectionLabel,
    pub bounding_box: BoundingBox,
}

#[derive(
    Debug, Clone, Serialize, Deserialize, PathIntrospect, PathSerialize, PathDeserialize, PartialEq,
)]
pub enum YOLOv8ObjectDetectionLabel {
    Person = 0,
    Bicycle = 1,
    Car = 2,
    Motorcycle = 3,
    Airplane = 4,
    Bus = 5,
    Train = 6,
    Truck = 7,
    Boat = 8,
    Trafficlight = 9,
    Firehydrant = 10,
    Stopsign = 11,
    Parkingmeter = 12,
    Bench = 13,
    Bird = 14,
    Cat = 15,
    Dog = 16,
    Horse = 17,
    Sheep = 18,
    Cow = 19,
    Elephant = 20,
    Bear = 21,
    Zebra = 22,
    Giraffe = 23,
    Backpack = 24,
    Umbrella = 25,
    Handbag = 26,
    Tie = 27,
    Suitcase = 28,
    Frisbee = 29,
    Skis = 30,
    Snowboard = 31,
    Sportsball = 32,
    Kite = 33,
    Baseballbat = 34,
    Baseballglove = 35,
    Skateboard = 36,
    Surfboard = 37,
    Tennisracket = 38,
    Bottle = 39,
    Wineglass = 40,
    Cup = 41,
    Fork = 42,
    Knife = 43,
    Spoon = 44,
    Bowl = 45,
    Banana = 46,
    Apple = 47,
    Sandwich = 48,
    Orange = 49,
    Broccoli = 50,
    Carrot = 51,
    Hotdog = 52,
    Pizza = 53,
    Donut = 54,
    Cake = 55,
    Chair = 56,
    Couch = 57,
    Pottedplant = 58,
    Bed = 59,
    Diningtable = 60,
    Toilet = 61,
    Tv = 62,
    Laptop = 63,
    Mouse = 64,
    Remote = 65,
    Keyboard = 66,
    Cellphone = 67,
    Microwave = 68,
    Oven = 69,
    Toaster = 70,
    Sink = 71,
    Refrigerator = 72,
    Book = 73,
    Clock = 74,
    Vase = 75,
    Scissors = 76,
    Teddybear = 77,
    Hairdrier = 78,
    Toothbrush = 79,
}

impl YOLOv8ObjectDetectionLabel {
    pub fn from_index(index: usize) -> Self {
        match index {
            0 => Self::Person,
            1 => Self::Bicycle,
            2 => Self::Car,
            3 => Self::Motorcycle,
            4 => Self::Airplane,
            5 => Self::Bus,
            6 => Self::Train,
            7 => Self::Truck,
            8 => Self::Boat,
            9 => Self::Trafficlight,
            10 => Self::Firehydrant,
            11 => Self::Stopsign,
            12 => Self::Parkingmeter,
            13 => Self::Bench,
            14 => Self::Bird,
            15 => Self::Cat,
            16 => Self::Dog,
            17 => Self::Horse,
            18 => Self::Sheep,
            19 => Self::Cow,
            20 => Self::Elephant,
            21 => Self::Bear,
            22 => Self::Zebra,
            23 => Self::Giraffe,
            24 => Self::Backpack,
            25 => Self::Umbrella,
            26 => Self::Handbag,
            27 => Self::Tie,
            28 => Self::Suitcase,
            29 => Self::Frisbee,
            30 => Self::Skis,
            31 => Self::Snowboard,
            32 => Self::Sportsball,
            33 => Self::Kite,
            34 => Self::Baseballbat,
            35 => Self::Baseballglove,
            36 => Self::Skateboard,
            37 => Self::Surfboard,
            38 => Self::Tennisracket,
            39 => Self::Bottle,
            40 => Self::Wineglass,
            41 => Self::Cup,
            42 => Self::Fork,
            43 => Self::Knife,
            44 => Self::Spoon,
            45 => Self::Bowl,
            46 => Self::Banana,
            47 => Self::Apple,
            48 => Self::Sandwich,
            49 => Self::Orange,
            50 => Self::Broccoli,
            51 => Self::Carrot,
            52 => Self::Hotdog,
            53 => Self::Pizza,
            54 => Self::Donut,
            55 => Self::Cake,
            56 => Self::Chair,
            57 => Self::Couch,
            58 => Self::Pottedplant,
            59 => Self::Bed,
            60 => Self::Diningtable,
            61 => Self::Toilet,
            62 => Self::Tv,
            63 => Self::Laptop,
            64 => Self::Mouse,
            65 => Self::Remote,
            66 => Self::Keyboard,
            67 => Self::Cellphone,
            68 => Self::Microwave,
            69 => Self::Oven,
            70 => Self::Toaster,
            71 => Self::Sink,
            72 => Self::Refrigerator,
            73 => Self::Book,
            74 => Self::Clock,
            75 => Self::Vase,
            76 => Self::Scissors,
            77 => Self::Teddybear,
            78 => Self::Hairdrier,
            79 => Self::Toothbrush,
            _ => unimplemented!(),
        }
    }
}

impl From<YOLOv8ObjectDetectionLabel> for String {
    fn from(label: YOLOv8ObjectDetectionLabel) -> Self {
        match label {
            YOLOv8ObjectDetectionLabel::Person => "Person",
            YOLOv8ObjectDetectionLabel::Bicycle => "Bicycle",
            YOLOv8ObjectDetectionLabel::Car => "Car",
            YOLOv8ObjectDetectionLabel::Motorcycle => "Motorcycle",
            YOLOv8ObjectDetectionLabel::Airplane => "Airplane",
            YOLOv8ObjectDetectionLabel::Bus => "Bus",
            YOLOv8ObjectDetectionLabel::Train => "Train",
            YOLOv8ObjectDetectionLabel::Truck => "Truck",
            YOLOv8ObjectDetectionLabel::Boat => "Boat",
            YOLOv8ObjectDetectionLabel::Trafficlight => "Trafficlight",
            YOLOv8ObjectDetectionLabel::Firehydrant => "Firehydrant",
            YOLOv8ObjectDetectionLabel::Stopsign => "Stopsign",
            YOLOv8ObjectDetectionLabel::Parkingmeter => "Parkingmeter",
            YOLOv8ObjectDetectionLabel::Bench => "Bench",
            YOLOv8ObjectDetectionLabel::Bird => "Bird",
            YOLOv8ObjectDetectionLabel::Cat => "Cat",
            YOLOv8ObjectDetectionLabel::Dog => "Dog",
            YOLOv8ObjectDetectionLabel::Horse => "Horse",
            YOLOv8ObjectDetectionLabel::Sheep => "Sheep",
            YOLOv8ObjectDetectionLabel::Cow => "Cow",
            YOLOv8ObjectDetectionLabel::Elephant => "Elephant",
            YOLOv8ObjectDetectionLabel::Bear => "Bear",
            YOLOv8ObjectDetectionLabel::Zebra => "Zebra",
            YOLOv8ObjectDetectionLabel::Giraffe => "Giraffe",
            YOLOv8ObjectDetectionLabel::Backpack => "Backpack",
            YOLOv8ObjectDetectionLabel::Umbrella => "Umbrella",
            YOLOv8ObjectDetectionLabel::Handbag => "Handbag",
            YOLOv8ObjectDetectionLabel::Tie => "Tie",
            YOLOv8ObjectDetectionLabel::Suitcase => "Suitcase",
            YOLOv8ObjectDetectionLabel::Frisbee => "Frisbee",
            YOLOv8ObjectDetectionLabel::Skis => "Skis",
            YOLOv8ObjectDetectionLabel::Snowboard => "Snowboard",
            YOLOv8ObjectDetectionLabel::Sportsball => "Sportsball",
            YOLOv8ObjectDetectionLabel::Kite => "Kite",
            YOLOv8ObjectDetectionLabel::Baseballbat => "Baseballbat",
            YOLOv8ObjectDetectionLabel::Baseballglove => "Baseballglove",
            YOLOv8ObjectDetectionLabel::Skateboard => "Skateboard",
            YOLOv8ObjectDetectionLabel::Surfboard => "Surfboard",
            YOLOv8ObjectDetectionLabel::Tennisracket => "Tennisracket",
            YOLOv8ObjectDetectionLabel::Bottle => "Bottle",
            YOLOv8ObjectDetectionLabel::Wineglass => "Wineglass",
            YOLOv8ObjectDetectionLabel::Cup => "Cup",
            YOLOv8ObjectDetectionLabel::Fork => "Fork",
            YOLOv8ObjectDetectionLabel::Knife => "Knife",
            YOLOv8ObjectDetectionLabel::Spoon => "Spoon",
            YOLOv8ObjectDetectionLabel::Bowl => "Bowl",
            YOLOv8ObjectDetectionLabel::Banana => "Banana",
            YOLOv8ObjectDetectionLabel::Apple => "Apple",
            YOLOv8ObjectDetectionLabel::Sandwich => "Sandwich",
            YOLOv8ObjectDetectionLabel::Orange => "Orange",
            YOLOv8ObjectDetectionLabel::Broccoli => "Broccoli",
            YOLOv8ObjectDetectionLabel::Carrot => "Carrot",
            YOLOv8ObjectDetectionLabel::Hotdog => "Hotdog",
            YOLOv8ObjectDetectionLabel::Pizza => "Pizza",
            YOLOv8ObjectDetectionLabel::Donut => "Donut",
            YOLOv8ObjectDetectionLabel::Cake => "Cake",
            YOLOv8ObjectDetectionLabel::Chair => "Chair",
            YOLOv8ObjectDetectionLabel::Couch => "Couch",
            YOLOv8ObjectDetectionLabel::Pottedplant => "Pottedplant",
            YOLOv8ObjectDetectionLabel::Bed => "Bed",
            YOLOv8ObjectDetectionLabel::Diningtable => "Diningtable",
            YOLOv8ObjectDetectionLabel::Toilet => "Toilet",
            YOLOv8ObjectDetectionLabel::Tv => "Tv",
            YOLOv8ObjectDetectionLabel::Laptop => "Laptop",
            YOLOv8ObjectDetectionLabel::Mouse => "Mouse",
            YOLOv8ObjectDetectionLabel::Remote => "Remote",
            YOLOv8ObjectDetectionLabel::Keyboard => "Keyboard",
            YOLOv8ObjectDetectionLabel::Cellphone => "Cellphone",
            YOLOv8ObjectDetectionLabel::Microwave => "Microwave",
            YOLOv8ObjectDetectionLabel::Oven => "Oven",
            YOLOv8ObjectDetectionLabel::Toaster => "Toaster",
            YOLOv8ObjectDetectionLabel::Sink => "Sink",
            YOLOv8ObjectDetectionLabel::Refrigerator => "Refrigerator",
            YOLOv8ObjectDetectionLabel::Book => "Book",
            YOLOv8ObjectDetectionLabel::Clock => "Clock",
            YOLOv8ObjectDetectionLabel::Vase => "Vase",
            YOLOv8ObjectDetectionLabel::Scissors => "Scissors",
            YOLOv8ObjectDetectionLabel::Teddybear => "Teddybear",
            YOLOv8ObjectDetectionLabel::Hairdrier => "Hairdrier",
            YOLOv8ObjectDetectionLabel::Toothbrush => "Toothbrush",
        }
        .to_string()
    }
}
